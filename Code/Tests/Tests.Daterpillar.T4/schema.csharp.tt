<#@ template hostspecific="true" language="C#" #>
<#@ assembly name="$(TargetDir)\Gigobyte.Daterpillar.Core.dll" #>
<#@ assembly name="System.Reflection" #>
<#@ assembly name="System.Runtime" #>
<#@ assembly name="System.Core" #>
<#@ assembly name="System.IO" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Reflection" #>
<#@ import namespace="Gigobyte.Daterpillar.Transformation" #>
<#@ import namespace="Gigobyte.Daterpillar.Transformation.Template" #>
<#@ output extension=".cs" #>
<# 
	/* *** INSTRUCTIONS *** */
	/// To run this template, the location of the "Gigobyte.Daterpillar.Core.dll" must be provided.
	/// If you add the .dll to project as a reference then perform a build, the directive above "@ assembly name="$(TargetDir)\Gigobyte.Daterpillar.Core.dll" #"
	/// will locate the .dll.
	/// ** Un-Comment statement at Line 51 after you have build the project. **
#>
using System;
using Gigobyte.Daterpillar.Data;
using System.Runtime.Serialization;
using Gigobyte.Daterpillar.Annotation;

namespace GeneratedCode
{
<# 
	/* *** INSTRUCTIONS *** */
	/// Provide the path to the schema document you wish to transform.
	/// Below are some examples of how a dynamic path can be constructed.

	/// string schemaPath = Path.Combine(Host.ResolveAssemblyReference("$(TargetDir)"), "schema.xddl.xml");
	/// string schemaPath = Path.Combine(Host.ResolveAssemblyReference("$(SolutionDir)"), "schema.xddl.xml");
	string schemaPath = Path.Combine(Host.ResolveAssemblyReference("$(ProjectDir)"), "schema.xddl.xml");
	
	/// You can also write your own template by implementing <see cref="Gigobyte.Daterpillar.Transformation.Template.ITemplate" />
	var settings = new CSharpTemplateSettings()
	{
		CommentsEnabled = true,
		DataContractsEnabled = true,
		SchemaAnnotationsEnabled = true,
		VirtualPropertiesEnabled = false
	};

	var template = new CSharpTemplate(settings);
	var schema = Schema.Load(File.OpenRead(schemaPath));
	string csharp = template.Transform(schema);

	PushIndent("\t");

	// uncomment this line after you have build the project.
	//WriteLine(csharp);
	ClearIndent();
#>
}