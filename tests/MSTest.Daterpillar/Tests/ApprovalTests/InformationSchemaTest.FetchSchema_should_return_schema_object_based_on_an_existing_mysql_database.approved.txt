CREATE TABLE IF NOT EXISTS `ability`
(
	`Id` INT NOT NULL COMMENT 'Get or set the Id. This value is a flag/it must be a power of 2.',
	`Name` VARCHAR(32) NOT NULL
);

CREATE UNIQUE INDEX `ability_Name` ON `ability` (`Name` ASC);
ALTER TABLE `ability` ADD PRIMARY KEY (`Id` ASC);

CREATE TABLE IF NOT EXISTS `attribute`
(
	`Id` TINYINT NOT NULL,
	`Name` VARCHAR(16) NOT NULL
);

CREATE UNIQUE INDEX `attribute_Name` ON `attribute` (`Name` ASC);
ALTER TABLE `attribute` ADD PRIMARY KEY (`Id` ASC);

CREATE TABLE IF NOT EXISTS `card`
(
	`Id` INT NOT NULL,
	`Name` VARCHAR(128) NOT NULL,
	`Text` TEXT NOT NULL,
	`Pendulum_Effect` TEXT NOT NULL,
	`Level` TINYINT NOT NULL,
	`Atk` INT NOT NULL,
	`Def` INT NOT NULL,
	`Card_Type_Id` INT NOT NULL,
	`Attribute_Id` TINYINT NOT NULL,
	`Card_Icon_Id` TINYINT NOT NULL,
	`Monster_Type_Id` TINYINT NOT NULL,
	`Ability_Id` INT NOT NULL,
	CONSTRAINT `card_Attribute_Id_TO_attribute_Id` FOREIGN KEY (`Attribute_Id`) REFERENCES `attribute`(`Id`) ON UPDATE CASCADE ON DELETE CASCADE,
	CONSTRAINT `card_Card_Icon_Id_TO_card_icon_Id` FOREIGN KEY (`Card_Icon_Id`) REFERENCES `card_icon`(`Id`) ON UPDATE CASCADE ON DELETE RESTRICT,
	CONSTRAINT `card_Monster_Type_Id_TO_monster_type_Id` FOREIGN KEY (`Monster_Type_Id`) REFERENCES `monster_type`(`Id`) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE INDEX `card_Attribute_Id_TO_attribute_Id` ON `card` (`Attribute_Id` ASC);
CREATE INDEX `card_Card_Icon_Id_TO_card_icon_Id` ON `card` (`Card_Icon_Id` ASC);
CREATE INDEX `card_Monster_Type_Id_TO_monster_type_Id` ON `card` (`Monster_Type_Id` ASC);
CREATE UNIQUE INDEX `card_Name` ON `card` (`Name` ASC);
ALTER TABLE `card` ADD PRIMARY KEY (`Id` ASC);

CREATE TABLE IF NOT EXISTS `card_extras`
(
	`Card_Id` INT NOT NULL,
	`Rulings` TEXT,
	`Tips` TEXT,
	`Trivia` TEXT,
	`Passcode` INT NOT NULL,
	CONSTRAINT `card_extras_Card_Id_TO_card_Id` FOREIGN KEY (`Card_Id`) REFERENCES `card`(`Id`) ON UPDATE RESTRICT ON DELETE RESTRICT
);

ALTER TABLE `card_extras` ADD PRIMARY KEY (`Card_Id` ASC);

CREATE TABLE IF NOT EXISTS `card_icon`
(
	`Id` TINYINT NOT NULL,
	`Name` VARCHAR(16) NOT NULL
);

CREATE UNIQUE INDEX `card_icon_Name` ON `card_icon` (`Name` ASC);
ALTER TABLE `card_icon` ADD PRIMARY KEY (`Id` ASC);

CREATE TABLE IF NOT EXISTS `card_number`
(
	`Pack_Acronym` VARCHAR(32) NOT NULL,
	`Number` SMALLINT NOT NULL,
	`Rarity_Id` TINYINT NOT NULL,
	`Art_Index` TINYINT NOT NULL,
	`Card_Id` INT NOT NULL,
	`Pack_Id` INT NOT NULL,
	CONSTRAINT `card_number_Card_Id_TO_card_Id` FOREIGN KEY (`Card_Id`) REFERENCES `card`(`Id`) ON UPDATE RESTRICT ON DELETE RESTRICT,
	CONSTRAINT `card_number_Pack_Id_TO_pack_Id` FOREIGN KEY (`Pack_Id`) REFERENCES `pack`(`Id`) ON UPDATE RESTRICT ON DELETE RESTRICT,
	CONSTRAINT `key_with_custom_name` FOREIGN KEY (`Rarity_Id`) REFERENCES `rarity`(`Id`) ON UPDATE RESTRICT ON DELETE RESTRICT
);

CREATE INDEX `card_number_Card_Id_TO_card_Id` ON `card_number` (`Card_Id` ASC);
CREATE INDEX `card_number_Pack_Id_TO_pack_Id` ON `card_number` (`Pack_Id` ASC);
CREATE INDEX `key_with_custom_name` ON `card_number` (`Rarity_Id` ASC);
ALTER TABLE `card_number` ADD PRIMARY KEY (`Art_Index` ASC);

CREATE TABLE IF NOT EXISTS `card_type`
(
	`Id` INT NOT NULL,
	`Name` VARCHAR(32) NOT NULL
);

CREATE UNIQUE INDEX `card_type_Name` ON `card_type` (`Name` ASC);
ALTER TABLE `card_type` ADD PRIMARY KEY (`Id` ASC);

CREATE TABLE IF NOT EXISTS `effect`
(
	`Id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT 'A custom column comment.',
	`Name` VARCHAR(32) NOT NULL
);

CREATE UNIQUE INDEX `effect_Name` ON `effect` (`Name` ASC);

CREATE TABLE IF NOT EXISTS `monster_type`
(
	`Id` TINYINT NOT NULL,
	`Name` VARCHAR(32) NOT NULL
);

CREATE UNIQUE INDEX `monster_type_Name` ON `monster_type` (`Name` ASC);
ALTER TABLE `monster_type` ADD PRIMARY KEY (`Id` ASC);

CREATE TABLE IF NOT EXISTS `pack`
(
	`Id` INT NOT NULL,
	`Acronym` VARCHAR(32) NOT NULL,
	`Name` VARCHAR(128) NOT NULL,
	`Description` TEXT NOT NULL,
	`Release_Date` DATE NOT NULL,
	`Size` INT NOT NULL COMMENT 'The number of unique cards in the pack.',
	`Konami_Id` INT NOT NULL
);

CREATE UNIQUE INDEX `pack_Name` ON `pack` (`Name` ASC);
ALTER TABLE `pack` ADD PRIMARY KEY (`Id` ASC);

CREATE TABLE IF NOT EXISTS `rarity`
(
	`Id` TINYINT NOT NULL,
	`Name` VARCHAR(32) NOT NULL,
	`Code` VARCHAR(4) NOT NULL,
	`Value` INT NOT NULL
);

ALTER TABLE `rarity` ADD PRIMARY KEY (`Id` ASC);
CREATE UNIQUE INDEX `rarity_Name` ON `rarity` (`Name` ASC);

