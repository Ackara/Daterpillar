BEGIN TRY
DROP DATABASE [GenerateSqlSchemaWithSettingsEnabled];
END TRY
BEGIN CATCH
END CATCH;

CREATE DATABASE [GenerateSqlSchemaWithSettingsEnabled];
USE [GenerateSqlSchemaWithSettingsEnabled];

-- ------------------------------------
-- CREATE EMPLOYEE TABLE
-- ------------------------------------
CREATE TABLE [GenerateSqlSchemaWithSettingsEnabled].[dbo].[Employee]
(
	[Id] int NOT NULL IDENTITY(1, 1),
	[Full_Name] int not null default 'n/a',
	[Salary] int not null,
	CONSTRAINT [fkey1] FOREIGN KEY ([Id]) REFERENCES [Card]([Id]) ON UPDATE SET NULL ON DELETE CASCADE
);

ALTER TABLE [GenerateSqlSchemaWithSettingsEnabled].[dbo].[Employee] ADD CONSTRAINT [GenerateSqlSchemaWithSettingsEnabled_Employee_pk] PRIMARY KEY ([Id] ASC);
CREATE UNIQUE INDEX [employee_idx] ON [GenerateSqlSchemaWithSettingsEnabled].[dbo].[Employee] ([Full_Name] DESC);
-- ------------------------------------
-- CREATE MANAGER TABLE
-- ------------------------------------
CREATE TABLE [GenerateSqlSchemaWithSettingsEnabled].[dbo].[Manager]
(
	[Id] int NOT NULL IDENTITY(1, 1),
	[Full_Name] int not null default 'n/a',
	[Salary] int not null,
	CONSTRAINT [fkey1] FOREIGN KEY ([Id]) REFERENCES [Card]([Id]) ON UPDATE SET NULL ON DELETE CASCADE
);

ALTER TABLE [GenerateSqlSchemaWithSettingsEnabled].[dbo].[Manager] ADD CONSTRAINT [GenerateSqlSchemaWithSettingsEnabled_Manager_pk] PRIMARY KEY ([Id] ASC);
CREATE UNIQUE INDEX [manager_idx] ON [GenerateSqlSchemaWithSettingsEnabled].[dbo].[Manager] ([Full_Name] DESC);

-- Script Goes Here
