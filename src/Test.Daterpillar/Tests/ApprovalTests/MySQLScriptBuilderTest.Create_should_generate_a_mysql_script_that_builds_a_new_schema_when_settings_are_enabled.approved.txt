-- ======================================================================
-- NAME:
-- daterpillar1

-- DESCRIPTION:
-- This is a usefull description.

-- AUTHOR:
-- john@example.com

-- DATE:
-- Mon 01, 0001 12:00 AM
-- ======================================================================

DROP DATABASE IF EXISTS `daterpillar1`;
CREATE DATABASE IF NOT EXISTS `daterpillar1`;
USE `daterpillar1`;

CREATE TABLE IF NOT EXISTS `genre`
(
	`Id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	`Name` VARCHAR(64) NOT NULL
);


CREATE TABLE IF NOT EXISTS `artist`
(
	`Id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	`Name` VARCHAR(64) NOT NULL,
	`Bio` TEXT
);

CREATE UNIQUE INDEX `artist_idx1` ON `artist` (`Name` DESC);

CREATE TABLE IF NOT EXISTS `album`
(
	`Artist_Id` INT NOT NULL,
	`Name` VARCHAR(64) NOT NULL,
	`Release_Date` DATE,
	CONSTRAINT `album_artist_id_to_artist_id_fkey2` FOREIGN KEY (`Artist_Id`) REFERENCES `artist`(`Id`) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE INDEX `album_idx3` ON `album` (`Artist_Id` ASC, `Name` ASC);

CREATE TABLE IF NOT EXISTS `song`
(
	`Id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	`Album_Id` INT NOT NULL,
	`Artist_Id` INT NOT NULL,
	`Genre_Id` INT NOT NULL,
	`Name` VARCHAR(256) NOT NULL,
	`Length` DECIMAL(4, 2),
	`Price` DECIMAL(12, 2) NOT NULL,
	`On_Device` BOOL NOT NULL,
	CONSTRAINT `song_genre_id_to_genre_id_fkey4` FOREIGN KEY (`Genre_Id`) REFERENCES `genre`(`Id`) ON UPDATE CASCADE ON DELETE CASCADE,
	CONSTRAINT `song_artist_id_to_artist_id_fkey5` FOREIGN KEY (`Artist_Id`) REFERENCES `artist`(`Id`) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE INDEX `song_idx` ON `song` (`Name` ASC);

